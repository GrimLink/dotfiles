#!/bin/bash

# Create a new directory and enter it
function mcd() { mkdir -p "$@" && cd "$@"; }

# Find shorthand
function f() { find . -name "$1" 2>&1 | grep -v 'Permission denied'; }

# Create a data URI from a file and copy it to the pasteboard
# TODO: create version without base64
function datauri() {
  local mimeType=$(file -b --mime-type "$1")
  if [[ $mimeType == text/* ]]; then
    mimeType="${mimeType};charset=utf-8"
  fi
  printf "data:${mimeType};base64,$(openssl base64 -in "$1" | tr -d '\n')" | pbcopy | printf "=> data URI copied to pasteboard.\n"
}

# Get tput setaf from hex color
function fromhex() {
  hex=${1#"#"}
  r=$(printf '0x%0.2s' "$hex")
  g=$(printf '0x%0.2s' ${hex#??})
  b=$(printf '0x%0.2s' ${hex#????})
  printf '%03d' "$(((r < 75 ? 0 : (r - 35) / 40) * 6 * 6 + (g < 75 ? 0 : (g - 35) / 40) * 6 + (b < 75 ? 0 : (b - 35) / 40) + 16))"
}
