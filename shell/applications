#!/bin/bash

# Each alias & function requires it's App or CLI to be installed.

# Brew
alias brewery="brew update && brew upgrade && brew cleanup"

# Browsers
function safari() { open -a Safari "$1"; }
function chrome() { open -a Google\ Chrome "$1"; }
function canary() { open -a Google\ Chrome\ Canary "$1"; }
function firefox() { open -a Firefox "$1"; }
function firefoxDev() { open -a FirefoxDeveloperEdition "$1"; }

# Lighthouse, Always use headless chrome
alias lighthouse='command lighthouse --chrome-flags="--headless"'

# Tower
alias tower="gittower"

# Gitkraken
alias kraken="open -a 'GitKraken' --args -p $(pwd)"

# Magento
alias m1="magerun"
alias m2="magerun2"
alias mage="php bin/magento"

function mage-open() {
  STORE=${1:-default};

  # TODO: create open without magerun
  # bin/magento config:show web/unsecure/base_url --scope="store" --scope-code="default"
  URL=$(m2 sys:store:config:base-url:list --format csv | grep $STORE | cut -d',' -f3);

  if [ -z "$URL" ]; then
    echo "Could not find url for store $STORE!";
  else
    echo "Opening url $URL!";
    open $URL;
  fi
}

# Sets base config for a local dev env
function mage-dev() {
  mage cache:disable layout block_html full_page
  mage config:set admin/security/session_lifetime 86400
  mage config:set admin/security/password_lifetime ""
  if [ "$1" == "--valet" -o ]; then
    # Valet default is de_DE
    mage config:set general/locale/code en_US
  fi
}
